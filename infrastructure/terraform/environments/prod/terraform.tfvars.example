# prod Environment Configuration
# Copy this file to terraform.tfvars and fill in sensitive values

subscription_id = "2dade7a0-6731-4d26-ba6d-02228cccbe2d"
environment     = "prod"
location        = "australiaeast"

# Feature flags
enable_container_apps = true  # Set to true when ready to deploy containers

# SKU configurations (cost-optimized for prod)
servicebus_sku           = "Standard"
storage_replication_type = "LRS"
acr_sku                  = "Basic"

# Scaling (matching prod for realistic testing)
api_min_replicas          = 1
api_max_replicas          = 5
worker_min_replicas       = 1
worker_max_replicas       = 10
consolidator_min_replicas = 1
consolidator_max_replicas = 2

# Worker scaling: 1 message per replica for maximum parallelism
worker_message_count = 1

# Scheduler: natural feed runs every 12h; labgrown has no cron (triggered by chain after natural)
enable_scheduler = true

# Nivoda API Configuration
nivoda_endpoint  = "https://intg-customer-prod.nivodaapi.net/api/diamonds"
nivoda_username  = "testaccount@sample.com"
nivoda_password  = "prod-nivoda-22"
 
# Database (Supabase)
database_url = "postgresql://postgres:superstrongpassword123!@db.yazrhmjedaaplwbsaqob.supabase.co:5432/postgres"
 
# Slack Notifications
slack_webhook_errors   = "https://hooks.slack.com/services/T.../B.../xxx"
slack_webhook_pipeline = "https://hooks.slack.com/services/T.../B.../yyy"
slack_webhook_ops      = "https://hooks.slack.com/services/T.../B.../zzz"


# Optional: Nivoda proxy (leave empty for prod unless you also need domain allowlisting)
nivoda_proxy_base_url  = "https://api-test.fourwords.co.nz"
internal_service_token = "super-secret-shared-token"
